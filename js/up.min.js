function fileSelected(){var t,n,e=document.getElementById("up").files[0];if(e)if(t=0,n=$("input[name=MAX_FILE_SIZE]").val(),e.size>1024*1024?t=(Math.round(e.size*100/(1024*1024))/100).toString()+"MB":t=(Math.round(e.size*100/1024)/100).toString()+"KB",e.size<=n)document.getElementById("fileInfo").innerHTML=escapeHtml(e.name)+' (<span id="filesize">'+escapeHtml(t)+"</span>)",uploadFile();else if(e.size>n)return $(".info").text("file too large"),$("#progressNumber").text(""),$("progress").val("0"),$(".results").hide(),!1}function uploadFile(){var e,t=new FormData;t.append("up",document.getElementById("up").files[0]),e=new XMLHttpRequest,e.upload.addEventListener("progress",uploadProgress,!1),e.addEventListener("load",uploadComplete,!1),e.addEventListener("error",uploadFailed,!1),e.addEventListener("abort",uploadCanceled,!1),e.open("POST","upload.php"),e.send(t)}function uploadProgress(e){if(e.lengthComputable){var t=Math.round(e.loaded*100/e.total);document.getElementById("progressNumber").innerHTML=t.toString()+"%",$("progress").val(t.toString()),t==100&&$(".malscan").show()}else document.getElementById("progressNumber").innerHTML="progress unavailable"}function uploadComplete(e){var t=e.target.responseText;t[0]=="{"?(t=jQuery.parseJSON(t),t.error?($(".info").text(t.error),$("#progressNumber").text(""),$("progress").val("0"),$(".results").hide(),$(".malscan").hide()):t.msg&&($(".image").html()&&$(".image a").prependTo(".last"),$(".results").slideUp().slideToggle(),$(".result").val(t.msg).show(),window.innerWidth>=600&&($("input[type=text]").select(),$(".result").select()),$(".image a").remove(),$(".image").append('<a href="'+t.msg+'" target="_blank"><img src="'+t.msg+'" alt="" /></a>'),$("progress").val("100"),$("#progressNumber").text("100%"),$(".malscan").hide())):t[0]!="{"&&($(".info").text("error"),$("#progressNumber").text(""),$("progress").val("0"),$(".results").hide(),$(".malscan").hide())}function uploadFailed(){alert("upload error")}function uploadCanceled(){alert("upload canceled")}function escapeHtml(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})}window.innerWidth>=600&&($(".result").focus(function(){$(".ctrl").html('<kbd class="light">CTRL</kbd> + <kbd class="light">C</kbd> = URL')}),$(".result_html").focus(function(){$(".ctrl").html('<kbd class="light">CTRL</kbd> + <kbd class="light">C</kbd> = HTML')}),$(".result_forum").focus(function(){$(".ctrl").html('<kbd class="light">CTRL</kbd> + <kbd class="light">C</kbd> = FORUM')}),$("input[type=text]").click(function(){this.select()})),$(".flyhigh").change(function(){return fileSelected()}),$("#ts-a").click(function(){return $(".rules p").hide(),$("#ts").slideToggle(),!1}),$("#pp-a").click(function(){return $(".rules p").hide(),$("#pp").slideToggle(),!1}),$("#ct-a").click(function(){return $(".rules p").hide(),$("#ct").slideToggle(),!1}),$(".rules p").click(function(){return $(this).slideToggle(),!1})